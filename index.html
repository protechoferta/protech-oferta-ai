<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>ProTech Oferta AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;margin:0;background:#f4f6fb}
header{background:#0f172a;color:#fff;padding:40px;text-align:center}
section{max-width:800px;margin:40px auto;background:#fff;padding:20px}
input,textarea,select,button{width:100%;padding:10px;margin-top:10px}
button{background:#2563eb;color:#fff;border:0;cursor:pointer}
#result{white-space:pre-wrap;margin-top:20px}
</style>
</head>
<body>

<header>
<h1>AI Generator Ofert</h1>
<p>Profesjonalna oferta w 2 minuty</p>
</header>

<section>
<form id="form">
<select id="industry">
<option>Elektryka</option>
<option>Fotowoltaika</option>
<option>Budownictwo</option>
</select>

<textarea id="scope" placeholder="Zakres prac"></textarea>
<input id="price" placeholder="Cena">
<input id="deadline" placeholder="Termin">
<textarea id="company" placeholder="Dane firmy"></textarea>

<button>Generuj ofertę</button>
</form>

<div id="result"></div>
</section>

<script>
document.getElementById("form").addEventListener("submit", async e => {
e.preventDefault();

const payload = {
industry: industry.value,
scope: scope.value,
price: price.value,
deadline: deadline.value,
company: company.value
};

result.textContent = "Generowanie oferty...";

try {
const res = await fetch("/.netlify/functions/generateOffer", {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify(payload)
});

const data = await res.json();
result.textContent = data.text || data.error;

} catch (err) {
result.textContent = "Błąd: " + err.message;
}
});
</script>

</body>
</html>
